<!--
    <legal_notice>
     MaxLinear, Inc. retains all right, title and interest (including all intellectual
     property rights) in and to this computer program, which is protected by applicable
     intellectual property laws.  Unless you have obtained a separate written license from
     MaxLinear, Inc. or an authorized licensee of MaxLinear, Inc., you are not authorized
     to utilize all or a part of this computer program for any purpose (including
     reproduction, distribution, modification, and compilation into object code), and you
     must immediately destroy or return all copies of this computer program.  If you are
     licensed by MaxLinear, Inc. or an authorized licensee of MaxLinear, Inc., your rights
     to utilize this computer program are limited by the terms of that license.
    
     This computer program contains trade secrets owned by MaxLinear, Inc. and, unless
     authorized by MaxLinear, Inc. in writing, you agree to maintain the confidentiality
     of this computer program and related information and to not disclose this computer
     program and related information to any other person or entity.
    
     Misuse of this computer program or any information contained in it may results in
     violations of applicable law.  MaxLinear, Inc. vigorously enforces its copyright,
     trade secret, patent, contractual, and other legal rights.
    
     THIS COMPUTER PROGRAM IS PROVIDED "AS IS" WITHOUT ANY WARRANTIES, AND 
      MAXLINEAR, INC.
     EXPRESSLY DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING THE 
     WARRANTIES OF
     MERCHANTIBILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE, AND 
     NONINFRINGEMENT.
    
    ***************************************************************************************
                                            Copyright (c) 2014/2020, MaxLinear, Inc.
    ***************************************************************************************
    </legal_notice>
-->

<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="styles.css">
<script language="JavaScript" src="common.js"></script>
<style>
:root {
  --primary-color: #0066cc;
  --secondary-color: #004d99;
  --background-color: #f5f5f5;
  --text-color: #333333;
  --border-color: #dddddd;
  --input-border-color: #cccccc;
  --button-text-color: white;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  font-size: 14px;
  color: var(--text-color);
  background-color: white; /* Match iframe background */
  margin: 0;
  padding: 15px;
}

table {
  width: 100%;
  max-width: 700px; /* Consistent max width */
  border-collapse: collapse;
  margin-bottom: 20px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  border: 1px solid var(--border-color);
}

th, td {
  padding: 10px 12px;
  text-align: left;
  border-bottom: 1px solid var(--border-color);
}

tr:last-child td {
  border-bottom: none;
}

td[colspan] > b {
  font-size: 1.2em;
  color: var(--primary-color);
}

/* Style for the header rows of each section */
table > tbody > tr:first-child {
  background-color: var(--background-color);
}

table > tbody > tr:first-child td {
  font-weight: bold;
  color: var(--primary-color);
  border-bottom: 2px solid var(--primary-color);
}

/* Style for th elements if any are used */
table th {
    background-color: var(--background-color);
    font-weight: bold;
    color: var(--text-color);
}


/* Separator rows */
td[colspan][style*=\"background:#dddddd\"]
{
  background-color: var(--background-color) !important; /* Override inline style */
  height: 5px;
  padding: 0 !important;
  border-top: 1px solid var(--border-color);
  border-bottom: 1px solid var(--border-color);
}
/* Remove duplicate top border if next to header */
tr:nth-child(2) > td[colspan][style*=\"background:#dddddd\"]{
    border-top: none;
}


form {
  margin: 0;
}

input[type=\"text\"],
input[type=\"password\"],
input[type=\"file\"],
select {
  padding: 8px;
  border: 1px solid var(--input-border-color);
  border-radius: 4px;
  box-sizing: border-box;
  font-size: 14px;
  transition: border-color 0.2s;
  width: 100%; /* Default to full width */
}

/* Override for inputs with a 'size' attribute */
input[type=\"text\"][size] {
    width: auto; /* Allow size attribute to dictate width */
    min-width: 40px; /* Prevent them from becoming too small */
}
input[type=\"text\"][size=\"5\"] { width: 60px; text-align: center; } /* For VLAN Tag inputs */
input[type=\"text\"][size=\"10\"] { width: 100px; }

input[type=\"text\"]:focus,
input[type=\"password\"]:focus,
input[type=\"file\"]:focus,
select:focus {
  border-color: var(--primary-color);
  outline: none;
  box-shadow: 0 0 0 2px rgba(0, 102, 204, 0.2);
}

input:disabled, select:disabled {
    background-color: #eeeeee;
    color: #888888;
    cursor: not-allowed;
}

/* Align elements based on td align attribute */
td[align=\"right\"] {
  text-align: right;
}
td[align=\"center\"] {
  text-align: center;
}

/* Button styling */
input[type="button"],
input[type="reset"],
input[type="submit"] /* Adding submit for consistency */
{
  padding: 8px 20px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  transition: background-color 0.2s, box-shadow 0.2s;
  margin-left: 10px;
  width: auto; 
}

input[type="button"],
input[type="submit"]
{
  background-color: var(--primary-color);
  color: var(--button-text-color);
}

input[type="button"]:hover,
input[type="submit"]:hover {
  background-color: var(--secondary-color);
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

input[type="reset"]
{
  background-color: #6c757d; 
  color: var(--button-text-color);
}

input[type="reset"]:hover
{
  background-color: #5a6268;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

/* Small text / font tags */
font[size=\"-1\"] {
  font-size: 0.9em; 
  color: var(--text-color);
}
td > font[size=\"-1\"] { 
    display: inline-block; 
}

/* Remove direct styling from specific table cells */
td[style*=\"background:#dddddd\"] {
  background: transparent !important; 
}

</style>
<script language="JavaScript">
function d2h(d) {return d.toString(16);}
function h2d(h) {return parseInt(h,16);}
function onLoadScripts()
{
  onVLANEnableChange();
}
function onVLANEnableChange()
{
  var nt='$$VLAN.CVLAN.ENABLE$$';
  var ntp=nt;
  vlanStateCheck(ntp);
}
function onOKClick(form)
{
  //disable all OK buttons after clicking to avoid sending 'OK' to the web server
  //we want to POST only CFL parameters to track last error
  document.getElementById("vlan_enabled_ok").disabled = true;
  document.getElementById("vlan_disable_ok").disabled = true;

  form.submit();
}
function onDisableClick(form)
{
  //disable all OK buttons after clicking to avoid sending 'OK' to the web server
  //we want to POST only CFL parameters to track last error
  document.getElementById("vlan_enabled_ok").disabled = true;
  document.getElementById("vlan_disable_ok").disabled = true;

  form.submit();
}
function vlanStateCheck(val)
{
  if (val == 'NO')
  {
    document.getElementById("vlan_disable_ok").disabled = true;    
  }
}
</script>
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Cache-Control" content="no-cache">
<meta http-equiv="Expires" content="Mon, 06 Jan 1990 00:00:01 GMT">
</head>
<body bgcolor="white" onLoad="onLoadScripts()">
<script language="JavaScript">
printErrorMsg("$$LASTERRORMESSAGE$$");
</script>

<div class="card">
  <div class="card-header">
    <span class="card-title">VLAN Settings</span>
  </div>
  <div class="card-content section-content">
    <!-- VLAN INFO -->
    <div style="padding:6px">
      <table width=520 style="/*border:3px solid #dddddd*/\">
      <tr><td colspan=2><b>VLAN Configuration</b></td></tr>

      <tr><td colspan=3 style="background:#dddddd"></td></tr>
      <tr><td colspan=3></td></tr>
      <form name="VLAN_ENABLE_FORM" method="POST">
      <input type="hidden" name="CSRFTOKEN" value="$$CSRFTOKEN$$">
      <input type="hidden" name="REDIRECT" value="vlan.html">

      <tr><td>VLAN feature Enabled:</td><td align="right">
      <script language="JavaScript">
      var nt='$$VLAN.CVLAN.ENABLE$$';
      var ntp=nt;
      document.write('<td align="center">'+ntp+'</td>');
      vlanStateCheck(ntp);
      </script>
      <tr><td colspan=3 align="right">
      <input name="DISABLE" value="Disable VLAN" type="button" id="vlan_disable_ok" onClick="onDisableClick(this.form)">&nbsp;
      <input type="hidden" name="VLAN.CVLAN.ENABLE" value="NO" id="vlan_disable_button">
      </td></tr>
      </form>
      </table>
    </div>

    <!-- VLAN TAG/IFACE configuration -->
    <div style="padding:6px">
      <table width=520 style="/*border:3px solid #dddddd*/\">
      <tr><td colspan=2><b>Configure port type and tag</b></td></tr>
      <tr><td colspan=2 style="background:#dddddd"></td></tr>
      <tr><td colspan=2></td></tr>
      <form name="VLAN_CONFIG_FORM" method="POST">
      <input type="hidden" name="CSRFTOKEN" value="$$CSRFTOKEN$$">
      <input type="hidden" name="REDIRECT" value="vlan.html">
      <tr><td>ETHA VLAN PVID:</td><td align="right">
      <input type="text" size=10 maxlength=10 name="VLAN.CVLAN.PVID_ETHA" value="$$VLAN.CVLAN.PVID_ETHA$$" id="vlan_pvid_etha">
      </td></tr>

      <tr><td>ETHA Port configuration</td><td align="right">
      <select name="VLAN.CVLAN.CONFIG_IF_ETHA" id="vlan_config_if_etha">
      <script language="JavaScript">
      var nt='$$VLAN.CVLAN.CONFIG_IF_ETHA$$';
      var ntp=nt;
      var nto=new Array('ACCESS','TRUNK','NONE');
      selectOptions(ntp,nto);
      </script>
      </select>
      </td></tr>

      <tr><td>ETHB VLAN PVID:</td><td align="right">
      <input type="text" size=10 maxlength=10 name="VLAN.CVLAN.PVID_ETHB" value="$$VLAN.CVLAN.PVID_ETHB$$"  id="vlan_pvid_ethb">
      </td></tr>

      <tr><td>ETHB Port configuration</td><td align="right">
      <select name="VLAN.CVLAN.CONFIG_IF_ETHB" id="vlan_config_if_ethb">
      <script language="JavaScript">
      var nt='$$VLAN.CVLAN.CONFIG_IF_ETHB$$';
      var ntp=nt;
      var nto=new Array('ACCESS','TRUNK','NONE');
      selectOptions(ntp,nto);
      </script>
      </select>
      </td></tr>

      <tr><td>FW VLAN PVID:</td><td align="right">
      <input type="text" size=10 maxlength=10 name="VLAN.CVLAN.PVID_MGMT" value="$$VLAN.CVLAN.PVID_MGMT$$" id="vlan_pvid_fw">
      </td></tr>

      <tr><td>MGMT Port configuration</td><td align="right">
      <select name="VLAN.CVLAN.CONFIG_IF_MGMT" id="vlan_config_if_mgmt">
      <script language="JavaScript">
      var nt='$$VLAN.CVLAN.CONFIG_IF_MGMT$$';
      var ntp=nt;
      var nto=new Array('ACCESS','TRUNK','NONE');
      selectOptions(ntp,nto);
      </script>
      </select>
      </td></tr>

      <tr><td>SDIO VLAN PVID:</td><td align="right">
      <input type="text" size=10 maxlength=10 name="VLAN.CVLAN.PVID_SDIO" value="$$VLAN.CVLAN.PVID_SDIO$$" id="vlan_pvid_sdio">
      </td></tr>

      <tr><td>SDIO Port configuration</td><td align="right">
      <select name="VLAN.CVLAN.CONFIG_IF_SDIO" id="vlan_config_if_sdio">
      <script language="JavaScript">
      var nt='$$VLAN.CVLAN.CONFIG_IF_SDIO$$';
      var ntp=nt;
      var nto=new Array('ACCESS','TRUNK','NONE');
      selectOptions(ntp,nto);
      </script>
      </select>
      </td></tr>
      </table>
    </div>


    <!-- VLAN FILTERING configuration -->
    <div style="padding:6px">
      <table width=520 style="/*border:3px solid #dddddd*/\">
      <tr><td><b>Ingress/Egress Filtering</b></td></tr>
      <tr><td colspan=7 style="background:#dddddd"></td></tr>
      <tr><td colspan=7></td></tr>

      <tr><td>Enable VLAN Filtering</td><td colspan=5></td><td align="right">
      <select name="VLAN.CVLAN.FILTERING_ENABLE" id="vlan_filtering_enable">
      <script language="JavaScript">
      var nt='$$VLAN.CVLAN.FILTERING_ENABLE$$';
      var ntp=nt;
      var nto=new Array('YES','NO');
      selectOptions(ntp,nto);
      </script>
      </select>
      </td></tr>

      <tr><td colspan=7 style="background:#dddddd"></td></tr>
      <tr><td colspan=7></td></tr>

      <tr><td>Allowed TAGS in ETHA:</td>
      <tr><td></td></tr>
      <script language="JavaScript">
        var allowed_tags_str = '$$VLAN.CVLAN.ALLOWED_TAGS_IN_ETHA$$';
        var tags = allowed_tags_str.split(",");
        for(var i=1;i<=16;i++)
        {
          document.write('<td align="right"><input type="text" size=5 maxlength=5 name="VLAN.CVLAN.ALLOWED_TAGS_IN_ETHA.'+i+'" value="'+(tags[i-1])+'" id="vlan_allowed_tags_etha'+i+'"></td><td align="right">');
          if (i%4 == 0)
          {
            document.write('<tr></tr>');
          }
        }
      </script>
      </td></tr>

      <tr><td colspan=7 style="background:#dddddd"></td></tr>
      <tr><td colspan=7></td></tr>
      <tr><td>Allowed TAGS in ETHB:</td><td align="right">
      <tr><td></td></tr>
      <script language="JavaScript">
        var allowed_tags_str = '$$VLAN.CVLAN.ALLOWED_TAGS_IN_ETHB$$';
        var tags = allowed_tags_str.split(",");
        for(var i=1;i<=16;i++)
        {
          document.write('<td align="right"><input type="text" size=5 maxlength=5 name="VLAN.CVLAN.ALLOWED_TAGS_IN_ETHB.'+i+'" value="'+(tags[i-1])+'" id="vlan_allowed_tags_ethb'+i+'"></td><td align="right">');
          if (i%4 == 0)
          {
            document.write('<tr></tr>');
          }
        }
      </script>
      </td></tr>

      <tr><td colspan=7 style="background:#dddddd"></td></tr>
      <tr><td colspan=7></td></tr>
      <tr><td>Allowed TAGS in FW:</td><td align="right">
      <tr><td></td></tr>
      <script language="JavaScript">
        var allowed_tags_str = '$$VLAN.CVLAN.ALLOWED_TAGS_IN_FW$$';
        var tags = allowed_tags_str.split(",");
        for(var i=1;i<=16;i++)
        {
          document.write('<td align="right"><input type="text" size=5 maxlength=5 name="VLAN.CVLAN.ALLOWED_TAGS_IN_FW.'+i+'" value="'+(tags[i-1])+'" id="vlan_allowed_tags_fw'+i+'"></td><td align="right">');
          if (i%4 == 0)
          {
            document.write('<tr><td></td></tr>');
          }
        }
      </script>
      </td></tr>

      <tr><td colspan=7 style="background:#dddddd"></td></tr>
      <tr><td colspan=7></td></tr>
      <tr><td>Allowed TAGS in SDIO:</td><td align="right">
      <tr><td></td></tr>
      <script language="JavaScript">
        var allowed_tags_str = '$$VLAN.CVLAN.ALLOWED_TAGS_IN_SDIO$$';
        var tags = allowed_tags_str.split(",");
        for(var i=1;i<=16;i++)
        {
          document.write('<td align="right"><input type="text" size=5 maxlength=5 name="VLAN.CVLAN.ALLOWED_TAGS_IN_SDIO.'+i+'" value="'+(tags[i-1])+'" id="vlan_allowed_tags_sdio'+i+'"></td><td align="right">');
          if (i%4 == 0)
          {
            document.write('<tr><td></td></tr>');
          }
        }
      </script>
      </td></tr>

    </div>
    <div>
      <tr><td colspan=7 style="background:#dddddd"></td></tr>
      <tr><td colspan=7 align="right">
      <input name="OK" value="Submit and Enable VLAN" type="button" id="vlan_enabled_ok" onClick="onOKClick(this.form)">&nbsp;<input name="CANCEL" value="Cancel" type="reset" id="vlan_enabled_cancel">
      <input type="hidden" name="VLAN.CVLAN.ENABLE" value="YES">
      </td></tr>
      </form>
      </td></tr>
      </table>
    </div>
  </div>
</div>

</body>
</html>
