<!--
    <legal_notice>
     MaxLinear, Inc. retains all right, title and interest (including all intellectual
     property rights) in and to this computer program, which is protected by applicable
     intellectual property laws.  Unless you have obtained a separate written license from
     MaxLinear, Inc. or an authorized licensee of MaxLinear, Inc., you are not authorized
     to utilize all or a part of this computer program for any purpose (including
     reproduction, distribution, modification, and compilation into object code), and you
     must immediately destroy or return all copies of this computer program.  If you are
     licensed by MaxLinear, Inc. or an authorized licensee of MaxLinear, Inc., your rights
     to utilize this computer program are limited by the terms of that license.
    
     This computer program contains trade secrets owned by MaxLinear, Inc. and, unless
     authorized by MaxLinear, Inc. in writing, you agree to maintain the confidentiality
     of this computer program and related information and to not disclose this computer
     program and related information to any other person or entity.
    
     Misuse of this computer program or any information contained in it may results in
     violations of applicable law.  MaxLinear, Inc. vigorously enforces its copyright,
     trade secret, patent, contractual, and other legal rights.
    
     THIS COMPUTER PROGRAM IS PROVIDED "AS IS" WITHOUT ANY WARRANTIES, AND 
      MAXLINEAR, INC.
     EXPRESSLY DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING THE 
     WARRANTIES OF
     MERCHANTIBILITY, FITNESS FOR A PARTICULAR PURPOSE, TITLE, AND 
     NONINFRINGEMENT.
    
    ***************************************************************************************
                                            Copyright (c) 2016/2020, MaxLinear, Inc.
    ***************************************************************************************
    </legal_notice>
-->

<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="styles.css">
<script language="JavaScript" src="common.js"></script>
<style>
:root {
  --primary-color: #ff6a00;
  --primary-light: #ff922b;
  --primary-dark: #c43e00;
  --background-color: #fff7f0;
  --card-bg: #fff;
  --text-color: #222;
  --border-color: #ffb380;
  --input-border: #ff922b;
  --shadow: 0 2px 12px rgba(255,106,0,0.08);
  --radius: 12px;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: var(--background-color);
  color: var(--text-color);
  margin: 0;
  padding: 24px 0;
  min-height: 100vh;
  width: 100%;
  box-sizing: border-box;
}

.card {
  background: var(--card-bg);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  border: 1.5px solid var(--border-color);
  margin: 24px auto;
  padding: 24px 4vw;
  width: 99vw;
  max-width: 100%;
  box-sizing: border-box;
}

.card-header {
  font-size: 1.5em;
  font-weight: bold;
  color: var(--primary-color);
  margin-bottom: 18px;
  letter-spacing: 1px;
}

.card-title {
  color: var(--primary-dark);
  font-size: 1.3em;
  font-weight: 600;
}

table {
  width: 100%;
  max-width: 1200px;
  border-collapse: collapse;
  margin-bottom: 20px;
  background: var(--card-bg);
  border-radius: var(--radius);
  overflow: hidden;
  box-shadow: var(--shadow);
  border: 1.5px solid var(--border-color);
}

th, td {
  padding: 12px 16px;
  text-align: left;
  border-bottom: 1px solid var(--border-color);
}

tr:last-child td {
  border-bottom: none;
}

td[colspan] > b {
  font-size: 1.2em;
  color: var(--primary-color);
}

.error-message {
  width: 99vw;
  max-width: 100%;
  margin: 0 auto 15px auto;
  box-sizing: border-box;
}

table > tbody > tr:first-child {
  background-color: var(--background-color);
}

table > tbody > tr:first-child td {
  font-weight: bold;
  color: var(--primary-color);
  border-bottom: 2px solid var(--primary-color);
}

/* Remove gray separator lines */
td[colspan][style*="background:#dddddd"] {
  display: none !important;
}

form {
  margin: 0;
  width: 100%;
}

input[type="text"],
select {
  width: 100%;
  padding: 12px 16px;
  border: 1.5px solid var(--input-border);
  border-radius: 6px;
  font-size: 1.1em;
  margin: 4px 0 12px 0;
  box-sizing: border-box;
  transition: border-color 0.2s, box-shadow 0.2s;
  background: #fff;
}

input[type="text"]:focus,
select:focus {
  border-color: var(--primary-color);
  outline: none;
  box-shadow: 0 0 0 2px var(--primary-light);
}

input[type="button"],
input[type="reset"] {
  background: linear-gradient(90deg, var(--primary-color), var(--primary-light));
  color: #fff;
  border: none;
  border-radius: 6px;
  padding: 10px 28px;
  font-size: 1em;
  font-weight: 600;
  cursor: pointer;
  margin: 8px 0;
  box-shadow: 0 2px 8px rgba(255,106,0,0.08);
  transition: background 0.2s, box-shadow 0.2s;
}

input[type="button"]:hover {
  background: linear-gradient(90deg, var(--primary-dark), var(--primary-color));
  box-shadow: 0 4px 16px rgba(255,106,0,0.15);
}

input[type="reset"] {
  background: linear-gradient(90deg, #6c757d, #5a6268);
  color: #fff;
}

input[type="reset"]:hover {
  background: linear-gradient(90deg, #5a6268, #4e555b);
  box-shadow: 0 4px 16px rgba(0,0,0,0.15);
}

td[align="right"] {
  text-align: right;
}

td[align="center"] {
  text-align: center;
}

/* Notches table scroll area */
div[style*="overflow: auto"] {
  border: 1.5px solid var(--border-color);
  border-radius: var(--radius);
  background-color: #fff;
  box-shadow: var(--shadow);
  margin-bottom: 16px;
}

div[style*="overflow: auto"] table {
  box-shadow: none;
  border: none;
  margin: 0;
  background: #fff;
}

div[style*="overflow: auto"] td {
  padding: 8px 10px;
  font-size: 1em;
}

div[style*="overflow: auto"] tr:hover {
  background-color: var(--background-color);
}

font[size="-1"] {
  color: var(--text-color);
  font-size: 1em;
}

@media (max-width: 900px) {
  .card, .error-message, table {
    max-width: 100vw;
    width: 100vw;
    padding-left: 2vw;
    padding-right: 2vw;
  }
  input[type="text"], select {
    max-width: 99vw;
  }
}
</style>
<script language="JavaScript">
function onOKClick(form)
{
  var index = document.getElementById("notches_add_index").value;
  document.getElementById("notches_add_start").name = 'POWERMASK.USER.NOTCHES.'+(parseInt(index)+1)+'.1';
  document.getElementById("notches_add_stop").name = 'POWERMASK.USER.NOTCHES.'+(parseInt(index)+1)+'.2';
  document.getElementById("notches_add_depth").name = 'POWERMASK.USER.NOTCHES.'+(parseInt(index)+1)+'.3';
  document.getElementById("notches_add_depth").value *= 2;
  document.getElementById("notches_add_index").disabled = true;

  //disable all OK buttons after clicking to avoid sending 'OK' to the web server
  //we want to POST only CFL parameters to track last error
  document.getElementById("notches_add_ok").disabled = true;

  form.submit();
}
function onRemoveOKClick(form)
{
  var index = document.getElementById("notches_remove_index").value;
  document.getElementById("notches_remove").name = 'POWERMASK.USER.NOTCHES.'+(parseInt(index)+1)+'.0';
  document.getElementById("notches_remove").value = "0,0,0";

  //disable all OK buttons after clicking to avoid sending 'OK' to the web server
  //we want to POST only CFL parameters to track last error
  document.getElementById("notches_remove_ok").disabled = true;

  form.submit();
}
</script>
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Cache-Control" content="no-cache">
<meta http-equiv="Expires" content="Mon, 06 Jan 1990 00:00:01 GMT">
</head>
<body bgcolor="white">
<script language="JavaScript">
document.write('<div class="error-message">');
printErrorMsg("$$LASTERRORMESSAGE$$");
document.write('</div>'); 
</script>

<div class="card">
  <div class="card-header">
    <span class="card-title">G.hn Spectrum Settings</span>
  </div>
  <div class="card-content section-content">
    <!-- Notches -->
    <div style="padding:6px">
      <table width=420 style="border:3px solid #dddddd">
      <tr><td colspan=2><b>Notches Configuration</b></td></tr>
      <tr><td colspan=2></td></tr>
      <tr><td colspan=2 style="background:#dddddd"></td></tr>
      <tr><td colspan=2></td></tr>

    <tr><td>
    <div style="padding:6px">
    <table style="width: 300px" cellpadding="0" cellspacing="0">
      <tr><td colspan=8><font size=-1>Notch index</font></td>
      <td colspan=8><font size=-1>Start freq (KHz)</font></td>
      <td colspan=8><font size=-1>Stop  freq (KHz)</font></td>
      <td colspan=8><font size=-1>Depth (dB)</font></td>
      <td colspan=8><font size=-1>Type</font></td></tr>
    </table>
    </div>

    <div style="overflow: auto;height: 250px; width: 100%;">
    <script language="JavaScript">
    document.write('<table style="width: 100%;" cellpadding="0" cellspacing="0">');
    document.write('<tr>' +
      '<td><font size=-1>Notch index</font></td>' +
      '<td><font size=-1>Start freq (KHz)</font></td>' +
      '<td><font size=-1>Stop  freq (KHz)</font></td>' +
      '<td><font size=-1>Depth (dB)</font></td>' +
      '<td><font size=-1>Type</font></td>' +
      '</tr>');
    var regul_str='$$POWERMASK.REGULATION.NOTCHES$$';
    var regul    = regul_str.split(",");
    var vendor_str='$$POWERMASK.VENDOR.NOTCHES$$';
    var vendor= vendor_str.split(",");
    var user_str='$$POWERMASK.USER.NOTCHES$$';
    var user= user_str.split(",");
      for (var i=0; i<regul.length; i+=3)
      {
        document.write('<tr>'+
          '<td align=center id="notches_regul_id'+i/3+'"><font size=-1>'+i/3+'</td>'+
          '<td align=right id="notches_regul_start'+i+'"><font size=-1>'+regul[i]+'</td>'+
          '<td align=right id="notches_regul_stop'+i+'"><font size=-1>'+regul[i+1]+'</td>'+
          '<td align=right id="notches_regul_depth'+i+'"><font size=-1>'+parseInt(regul[i+2])/2+'</td>'+
          '<td align=left id="notches_regul_type'+i+'"><font size=-1>'+'&nbsp; &nbsp; Regulation'+'</td>'+
          '</tr>');
      }
    if (vendor_str!='0')
    {
      for (var i=0; i<vendor.length; i+=3)
      {
        document.write('<tr>'+
          '<td align=center id="notches_vendor_id'+i/3+'"><font size=-1>'+i/3+'</td>'+
          '<td align=right id="notches_vendor_start'+i+'"><font size=-1>'+vendor[i]+'</td>'+
          '<td align=right id="notches_vendor_stop'+i+'"><font size=-1>'+vendor[i+1]+'</td>'+
          '<td align=right id="notches_vendor_depth'+i+'"><font size=-1>'+parseInt(vendor[i+2])/2+'</td>'+
          '<td align=left id="notches_vendor_type'+i+'"><font size=-1>'+'&nbsp; &nbsp; Vendor'+'</td>'+
          '</tr>');
      }
    }
    if (user_str!='0')
    {
      for (var i=0; i<user.length; i+=3)
      {
        document.write('<tr>'+
          '<td align=center id="notches_user_id'+i/3+'"><font size=-1>'+i/3+'</td>'+
          '<td align=right id="notches_user_start'+i+'"><font size=-1>'+user[i]+'</td>'+
          '<td align=right id="notches_user_stop'+i+'"><font size=-1>'+user[i+1]+'</td>'+
          '<td align=right id="notches_user_depth'+i+'"><font size=-1>'+parseInt(user[i+2])/2+'</td>'+
          '<td align=left id="notches_user_type'+i+'"><font size=-1>'+'&nbsp; &nbsp; User'+'</td>'+
          '</tr>');
      }
    }
    document.write('</table>');
    </script>
    </div>
    </td></tr>



      <tr><td colspan=2 style="background:#dddddd"></td></tr>
      <tr><td colspan=2></td></tr>
      <tr><td colspan=2>Add new user notch</td></tr>
      <form name="NOTCHES_FORM" method="POST">
      <input type="hidden" name="CSRFTOKEN" value="$$CSRFTOKEN$$">
      <input type="hidden" name="REDIRECT" value="ghn_spectrum.html">
      <input type="hidden" name="POWERMASK.USER.NOTCHES_ENABLE" value="YES">

      <tr><td>&#8226;Index (0..9)</td><td align="right">
      <input type="text" size=10 maxlength=10 name="" value="" id="notches_add_index">
      </td></tr>

      <tr><td>&#8226;Start frequency (KHz)</td><td align="right">
      <input type="text" size=10 maxlength=10 id="notches_add_start">
      </td></tr>
      <tr><td>&#8226;Stop frequency (KHz)</td><td align="right">
      <input type="text" size=10 maxlength=10 id="notches_add_stop">
      </td></tr>
      <tr><td>&#8226;Depth (0..40dB, 100 removes notch)</td><td align="right">
      <input type="text" size=10 maxlength=10 id="notches_add_depth">
      <tr><td colspan=2></td></tr>
      <tr><td colspan=2 align="right">
      <input name="OK" value="Ok" type="button" id="notches_add_ok" onClick="onOKClick(this.form)">&nbsp;<input name="CANCEL" value="Cancel" type="reset" id="notches_add_cancel">
      </td></tr>
      <input type="hidden" name="POWERMASK.GENERAL.NOTCHES_UPDATE" value="YES">
      </form>
      </form>


      <tr><td colspan=2 style="background:#dddddd"></td></tr>
      <tr><td colspan=2></td></tr>
      <tr><td colspan=2>Remove user notch</td></tr>
      <form name="NOTCHES_REMOVE_FORM" method="POST">
      <input type="hidden" name="CSRFTOKEN" value="$$CSRFTOKEN$$">
      <input type="hidden" name="REDIRECT" value="ghn_spectrum.html">
      <input type="hidden" id="notches_remove"

      <tr><td>&#8226;Index (0..9)</td><td align="right">
      <input type="text" size=10 maxlength=10 id="notches_remove_index">
      </td></tr>
      <tr><td colspan=2></td></tr>
      <tr><td colspan=2 align="right">
      <input name="OK" value="Ok" type="button" id="notches_remove_ok" onClick="onRemoveOKClick(this.form)">&nbsp;<input name="CANCEL" value="Cancel" type="reset" id="notches_remove_cancel">
      <input type="hidden" name="POWERMASK.GENERAL.NOTCHES_UPDATE" value="YES">
      </td></tr>
      </form>
      </form>
      </table>
    </div>
  </div>
</div>

</body>
</html>
